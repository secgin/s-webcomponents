<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SelectInput Demo</title>
    <script type="module" src="../src/index.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">

    <style>
        body {

            padding: 2rem;
        }
    </style>
</head>

<body>
    <form>
    <h1>SelectInput Demo</h1>
    <select-input name="meyve1">
        <select-input-option value="elma" label="Elma"></select-input-option>
        <select-input-option value="armut" label="Armut"></select-input-option>
        <select-input-option value="muz" label="Muz"></select-input-option>
        <select-input-option value="karpuz" label="Karpuz"></select-input-option>
        <select-input-option value="cilek" label="Çilek"></select-input-option>
        <select-input-option value="uzum" label="Üzüm"></select-input-option>
    </select-input>

    <br /><br /><br />
    <h1>API Url SelectInput Demo</h1>
    <select-input name="urun1" api-url="https://fakestoreapi.com/products" api-config="mySelectConfig">
    </select-input>

    <br /><br /><br />
    <h1>SelectInput Demo 2</h1>
    <select-input name="urun2" api-url="https://fakestoreapi.com/products" api-config="mySelectConfig" class="form-control" style="--select-input-padding: .5rem 1rem">
        <select-input-option value="elma" label="Elma">elma</select-input-option>
        <select-input-option value="armut" label="Armut"></select-input-option>
        <select-input-option value="muz" label="Muz"></select-input-option>
        <select-input-option value="karpuz" label="Karpuz"></select-input-option>
        <select-input-option value="cilek" label="Çilek"></select-input-option>
        <select-input-option value="uzum" label="Üzüm"></select-input-option>
    </select-input>
    <button type="submit">Send</button>
    </form>


    <script>
        var form = document.querySelector('form');
        form.addEventListener('submit', function (e) {
            e.preventDefault();
            const data = Object.fromEntries(new FormData(form).entries());
            console.log('Form gönderildi. Seçilen değer:', data);
        });

        document.querySelectorAll('select-input').forEach(function (el) {
            el.addEventListener('change', function (e) {
                var name = el.getAttribute('name');
                var hidden = form.querySelector('input[type="hidden"][name="' + name + '"]');
                if (hidden) {
                    hidden.value = e.detail.value;
                }
                console.log('Seçilen değer:', e.detail);
            });
        });

        window.mySelectConfig = {
            paramName: 'q',
            mapper: data => data.map(item => ({ value: item.id, label: item.title })),
            filter: (data, searchValue) => data.filter(item => item.label.toLowerCase().includes(searchValue.toLowerCase()))
        };
    </script>
</body>

</html>